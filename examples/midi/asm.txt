.shades 2
.saved 0
.global want_music 1

$PDF_FONT_PIXELOIDSANS:
  .b f 06 06 00 f8 00 00 08 06 06 00 f8 00 00 08 06 06
  .b f 00 f8 00 00 08 06 06 00 f8 00 00 08 06 06 00 f8
  .b f 00 00 08 06 06 00 f8 00 00 08 06 06 00 f8 00 00
  .b f 08 06 06 00 f8 00 00 08 06 06 00 f8 00 00 08 06
  .b f 06 00 f8 00 00 08 06 06 00 f8 00 00 08 06 06 00
  .b f f8 00 00 08 06 06 00 f8 00 00 08 06 06 00 f8 00
  .b f 00 08 06 06 00 f8 00 00 08 06 06 00 f8 00 00 08
  .b f 06 06 00 f8 00 00 08 06 06 00 f8 00 00 08 06 06
  .b f 00 f8 00 00 08 06 06 00 f8 00 00 08 06 06 00 f8
  .b f 00 00 08 06 06 00 f8 00 00 08 06 06 00 f8 00 00
  .b f 08 06 06 00 f8 00 00 08 06 06 00 f8 00 00 08 06
  .b f 06 00 f8 00 00 08 06 06 00 f8 00 00 08 06 06 00
  .b f f8 00 00 08 06 06 00 f8 00 00 08 06 06 00 f8 00
  .b f 00 08 06 06 00 f8 00 00 08 06 06 00 f8 00 00 08
  .b f 03 00 00 00 00 00 08 02 02 00 f8 06 00 08 04 04
  .b f 00 f8 08 00 08 06 06 00 f8 0c 00 08 06 06 00 f7
  .b f 12 00 10 06 06 00 f8 1e 00 08 06 06 00 f8 24 00
  .b f 08 02 02 00 f8 08 00 08 04 04 00 f8 2a 00 10 04
  .b f 04 00 f8 32 00 10 04 04 00 f8 3a 00 08 04 04 00
  .b f fa 3e 00 08 02 02 00 fe 08 00 08 04 04 00 fb 42
  .b f 00 08 02 02 00 fe 2c 00 08 06 06 00 f8 46 00 08
  .b f 06 06 00 f8 4c 00 08 06 06 00 f8 52 00 08 06 06
  .b f 00 f8 58 00 08 06 06 00 f8 5e 00 08 06 06 00 f8
  .b f 64 00 08 06 06 00 f8 6a 00 08 06 06 00 f8 70 00
  .b f 08 06 06 00 f8 76 00 08 06 06 00 f8 7c 00 08 06
  .b f 06 00 f8 82 00 08 02 02 00 fa 88 00 08 02 02 00
  .b f fa 6e 00 08 04 04 00 f9 8a 00 08 04 04 00 fa 8e
  .b f 00 08 04 04 00 f9 92 00 08 06 06 00 f8 96 00 08
  .b f 06 06 00 f8 9c 00 08 06 06 00 f8 a2 00 08 06 06
  .b f 00 f8 a8 00 08 06 06 00 f8 ae 00 08 06 06 00 f8
  .b f b4 00 08 06 06 00 f8 ba 00 08 06 06 00 f8 c0 00
  .b f 08 06 06 00 f8 c6 00 08 06 06 00 f8 cc 00 08 04
  .b f 04 00 f8 d2 00 08 05 05 00 f8 d6 00 08 06 06 00
  .b f f8 db 00 08 06 06 00 f8 e1 00 08 08 08 00 f8 e7
  .b f 00 08 07 07 00 f8 ef 00 08 06 06 00 f8 f6 00 08
  .b f 06 06 00 f8 fc 00 08 06 06 00 f8 02 01 08 06 06
  .b f 00 f8 08 01 08 06 06 00 f8 0e 01 08 06 06 00 f8
  .b f 14 01 08 06 06 00 f8 1a 01 08 06 06 00 f8 20 01
  .b f 08 08 08 00 f8 26 01 08 06 06 00 f8 2e 01 08 06
  .b f 06 00 f8 34 01 08 06 06 00 f8 3a 01 08 04 04 00
  .b f f8 40 01 10 06 06 00 f8 48 01 08 04 04 00 f8 4e
  .b f 01 10 06 06 00 f8 56 01 08 04 04 00 00 44 01 08
  .b f 06 03 01 f6 5c 01 08 06 06 00 fa 5f 01 08 06 06
  .b f 00 f8 65 01 08 06 06 00 fa 6b 01 08 06 06 00 f8
  .b f 71 01 08 06 06 00 fa 77 01 08 04 04 00 f8 7d 01
  .b f 08 06 06 00 fa 81 01 10 06 06 00 f8 8d 01 08 02
  .b f 02 00 f8 93 01 08 05 05 00 f8 95 01 10 05 05 00
  .b f f8 9f 01 08 02 02 00 f8 04 00 08 08 08 00 fa a4
  .b f 01 08 06 06 00 fa ac 01 08 06 06 00 fa b2 01 08
  .b f 06 06 00 fa b8 01 10 06 06 00 fa c4 01 10 05 05
  .b f 00 fa d0 01 08 06 06 00 fa d5 01 08 04 04 00 f8
  .b f db 01 08 06 06 00 fa df 01 08 06 06 00 fa e5 01
  .b f 08 08 08 00 fa eb 01 08 06 06 00 fa f3 01 08 06
  .b f 06 00 fa f9 01 10 06 06 00 fa 05 02 08 05 05 00
  .b f f8 0b 02 10 02 02 00 f8 15 02 10 05 05 00 f8 19
  .b f 02 10 06 06 00 fa 23 02 08 06 06 00 f8 00 00 08
  .b f 06 06 00 f8 00 00 08 06 06 00 f8 00 00 08 06 06
  .b f 00 f8 00 00 08 06 06 00 f8 00 00 08 06 06 00 f8
  .b f 00 00 08 06 06 00 f8 00 00 08 06 06 00 f8 00 00
  .b f 08 06 06 00 f8 00 00 08 06 06 00 f8 00 00 08 06
  .b f 06 00 f8 00 00 08 06 06 00 f8 00 00 08 06 06 00
  .b f f8 00 00 08 06 06 00 f8 00 00 08 06 06 00 f8 00
  .b f 00 08 06 06 00 f8 00 00 08 06 06 00 f8 00 00 08
  .b f 06 06 00 f8 00 00 08 06 06 00 f8 00 00 08 06 06
  .b f 00 f8 00 00 08 06 06 00 f8 00 00 08 06 06 00 f8
  .b f 00 00 08 06 06 00 f8 00 00 08 06 06 00 f8 00 00
  .b f 08 06 06 00 f8 00 00 08 06 06 00 f8 00 00 08 06
  .b f 06 00 f8 00 00 08 06 06 00 f8 00 00 08 06 06 00
  .b f f8 00 00 08 06 06 00 f8 00 00 08 06 06 00 f8 00
  .b f 00 08 06 06 00 f8 00 00 08 06 06 00 f8 00 00 08
  .b f 03 00 00 00 00 00 08 02 02 00 f9 29 02 10 06 06
  .b f 00 f9 2d 02 10 06 06 00 f8 39 02 08 06 06 00 f9
  .b f 3f 02 08 06 06 00 f8 45 02 08 02 02 00 f8 4b 02
  .b f 10 06 06 00 f7 4f 02 10 06 04 01 f6 5b 02 08 08
  .b f 08 00 f8 5f 02 08 06 06 00 f8 67 02 08 06 06 00
  .b f fa 6d 02 08 04 04 00 fb 73 02 08 04 04 00 fb 42
  .b f 00 08 08 08 00 f8 77 02 08 06 04 01 f6 42 00 08
  .b f 05 05 00 f8 7f 02 08 04 04 00 fa 84 02 08 06 06
  .b f 00 f8 88 02 08 06 06 00 f8 8e 02 08 06 03 02 f6
  .b f d2 01 08 06 06 00 fa 94 02 10 06 06 00 f8 a0 02
  .b f 10 02 02 00 fb 2c 00 08 06 03 01 00 58 02 08 06
  .b f 06 00 f8 ac 02 08 06 06 00 f8 b2 01 08 06 06 00
  .b f fa b2 02 08 06 06 00 f7 b8 02 10 06 06 00 f7 c4
  .b f 02 10 06 06 00 f7 d0 02 10 06 06 00 f9 dc 02 10
  .b f 06 06 00 f6 e8 02 10 06 06 00 f6 f4 02 10 06 06
  .b f 00 f6 00 03 10 06 06 00 f6 0c 03 10 06 06 00 f6
  .b f 18 03 10 06 06 00 f6 00 03 10 07 07 00 f8 24 03
  .b f 08 06 06 00 f8 2b 03 10 06 06 00 f6 37 03 10 06
  .b f 06 00 f6 43 03 10 06 06 00 f6 4f 03 10 06 06 00
  .b f f6 5b 03 10 04 04 00 f6 67 03 10 04 04 00 f6 6f
  .b f 03 10 04 04 00 f6 77 03 10 04 04 00 f6 7f 03 10
  .b f 06 08 ff f8 86 03 08 07 07 00 f6 8e 03 10 06 06
  .b f 00 f6 9c 03 10 06 06 00 f6 a8 03 10 06 06 00 f6
  .b f b4 03 10 06 06 00 f6 c0 03 10 06 06 00 f6 cc 03
  .b f 10 06 06 00 f9 f3 01 08 06 06 00 f8 d8 03 08 06
  .b f 06 00 f6 de 03 10 06 06 00 f6 ea 03 10 06 06 00
  .b f f6 f6 03 10 06 06 00 f6 02 04 10 06 06 00 f6 0e
  .b f 04 10 06 06 00 f8 1a 04 08 06 06 00 f8 20 04 08
  .b f 06 06 00 f7 26 04 10 06 06 00 f7 32 04 10 06 06
  .b f 00 f7 3e 04 10 06 06 00 f7 4a 04 10 06 06 00 f8
  .b f 56 04 08 06 06 00 f7 5c 04 10 08 08 00 fa 68 04
  .b f 08 06 06 00 fa 70 04 10 06 06 00 f7 7c 04 10 06
  .b f 06 00 f7 88 04 10 06 06 00 f7 94 04 10 06 06 00
  .b f f8 a0 04 08 02 04 ff f7 a5 04 10 02 03 00 f7 ad
  .b f 04 10 04 04 00 f7 b3 04 10 02 05 ff f8 ba 04 08
  .b f 06 06 00 f7 bf 04 10 06 06 00 f7 cb 04 10 06 06
  .b f 00 f7 d7 04 10 06 06 00 f7 e3 04 10 06 06 00 f7
  .b f ef 04 10 06 06 00 f7 fb 04 10 06 06 00 f8 07 05
  .b f 08 04 04 00 f9 0d 05 08 06 06 00 fa 11 05 08 06
  .b f 06 00 f7 17 05 10 06 06 00 f7 23 05 10 06 06 00
  .b f f7 2f 05 10 06 06 00 f8 3b 05 08 06 06 00 f7 41
  .b f 05 10 06 06 00 f8 4d 05 10 06 06 00 f8 59 05 10
  .b f 0b fe 82 82 82 fe 00 be 00 06 00 06 00 44 fe 44
  .b f fe 44 00 98 24 fe 24 c8 00 00 01 03 01 00 00 c6
  .b f 26 10 c8 c6 00 6c 92 ac 40 a0 00 78 84 02 00 00
  .b f 00 01 00 02 84 78 00 01 00 00 00 0a 04 0a 00 04
  .b f 0e 04 00 02 02 02 00 c0 20 10 08 06 00 7c 82 92
  .b f 82 7c 00 82 82 fe 80 80 00 84 c2 a2 92 8c 00 44
  .b f 82 92 92 6c 00 30 28 24 fe 20 00 5e 92 92 92 62
  .b f 00 7c 92 92 92 64 00 82 42 22 12 0e 00 6c 92 92
  .b f 92 6c 00 4c 92 92 92 7c 00 22 00 08 14 22 00 0a
  .b f 0a 0a 00 22 14 08 00 04 02 a2 12 0c 00 fe 82 9a
  .b f 92 9e 00 f0 2c 22 2c f0 00 fe 92 92 92 6c 00 7c
  .b f 82 82 82 44 00 fe 82 82 44 38 00 fe 92 92 92 82
  .b f 00 fe 12 12 12 02 00 7c 82 92 92 f0 00 fe 10 10
  .b f 10 fe 00 82 fe 82 00 60 80 80 7e 00 fe 10 28 44
  .b f 82 00 fe 80 80 80 80 00 fe 04 08 10 08 04 fe 00
  .b f fe 02 0c 30 40 fe 00 7c 82 82 82 7c 00 fe 12 12
  .b f 12 0c 00 7c 82 a2 42 bc 00 fe 12 32 52 8c 00 4c
  .b f 92 92 92 64 00 02 02 fe 02 02 00 7e 80 80 80 7e
  .b f 00 0e 30 c0 30 0e 00 3e c0 30 0c 30 c0 3e 00 c6
  .b f 28 10 28 c6 00 0e 10 f0 10 0e 00 c2 a2 92 8a 86
  .b f 00 fe 02 02 00 01 01 01 00 06 08 10 20 c0 00 02
  .b f 02 fe 00 01 01 01 00 08 04 02 04 08 00 02 04 00
  .b f 1c 22 22 14 3e 00 fe 50 88 88 70 00 1c 22 22 22
  .b f 22 00 70 88 88 50 fe 00 1c 2a 2a 2a 2c 00 08 fe
  .b f 0a 00 1c a2 a2 94 7e 00 00 00 00 00 00 00 fe 10
  .b f 08 08 f0 00 fa 00 80 00 00 fa 00 00 01 01 00 00
  .b f fe 20 50 88 00 3e 02 02 3c 02 02 3c 00 3e 04 02
  .b f 02 3c 00 1c 22 22 22 1c 00 fe 14 22 22 1c 00 00
  .b f 00 00 00 00 00 1c 22 22 14 fe 00 00 00 00 00 00
  .b f 00 3e 08 04 02 00 24 2a 2a 2a 12 00 08 fe 88 00
  .b f 1e 20 20 20 1e 00 0e 10 20 10 0e 00 1e 20 10 0c
  .b f 10 20 1e 00 22 14 08 14 22 00 86 98 60 18 06 00
  .b f 00 00 00 00 00 00 32 2a 2a 2a 26 00 30 fc 02 02
  .b f 00 00 00 01 01 00 fe 00 01 00 02 02 fc 30 00 01
  .b f 01 00 00 00 04 02 04 08 04 00 fa 00 00 00 38 44
  .b f fe 44 44 00 00 00 00 00 00 00 90 fc 92 82 84 00
  .b f 22 1c 14 1c 22 00 52 54 f8 54 52 00 ce 00 01 00
  .b f 2c 52 52 52 a4 00 01 02 02 02 01 00 02 00 02 00
  .b f 7c 82 ba aa aa 82 7c 00 10 2a 2a 2a 3c 00 08 14
  .b f 2a 14 22 00 02 02 0e 00 7c 82 ba 9a a2 82 7c 00
  .b f 0c 12 12 0c 00 24 2e 24 00 22 32 2a 24 20 00 22
  .b f 2a 2a 2a 14 00 fe 20 20 20 1e 00 00 00 00 00 00
  .b f 00 0c 1e fe 02 fe 00 00 00 01 00 01 00 22 22 3e
  .b f 20 20 00 22 14 2a 14 08 00 2a 2e a8 20 a0 00 00
  .b f 00 01 01 03 00 2a 2e a8 a0 20 00 00 00 00 03 02
  .b f 00 2a 2e ae 20 a0 00 00 00 01 01 03 00 60 90 8a
  .b f 80 40 00 00 00 00 00 00 00 c0 b2 8c b0 c0 00 03
  .b f 00 00 00 03 00 c0 b0 8c b2 c0 00 03 00 00 00 03
  .b f 00 c0 b4 8a b4 c0 00 03 00 00 00 03 00 c0 b4 8a
  .b f b4 c2 00 03 00 00 00 03 00 c0 b2 88 b2 c0 00 03
  .b f 00 00 00 03 00 fc 12 12 fc 92 92 00 7c 82 82 82
  .b f 44 00 00 02 01 00 00 00 f8 4a 4c 48 08 00 03 02
  .b f 02 02 02 00 f8 48 4c 4a 08 00 03 02 02 02 02 00
  .b f f8 4c 4a 4c 08 00 03 02 02 02 02 00 f8 4a 48 4a
  .b f 08 00 03 02 02 02 02 00 0a fc 08 00 02 03 02 00
  .b f 08 fc 0a 00 02 03 02 00 0c fa 0c 00 02 03 02 00
  .b f 0a f8 0a 00 02 03 02 00 10 fe 92 82 44 38 00 f8
  .b f 0c 32 c4 02 f8 00 03 00 00 00 01 03 00 f0 0a 0c
  .b f 08 f0 00 01 02 02 02 01 00 f0 08 0c 0a f0 00 01
  .b f 02 02 02 01 00 f0 0c 0a 0c f0 00 01 02 02 02 01
  .b f 00 f0 0c 0a 0c f2 00 01 02 02 02 01 00 f0 0a 08
  .b f 0a f0 00 01 02 02 02 01 00 7c a2 92 8a 7c 00 f8
  .b f 02 04 00 f8 00 01 02 02 02 01 00 f8 00 04 02 f8
  .b f 00 01 02 02 02 01 00 f8 04 02 04 f8 00 01 02 02
  .b f 02 01 00 f8 02 00 02 f8 00 01 02 02 02 01 00 38
  .b f 40 c4 42 38 00 00 00 03 00 00 00 fe 44 44 44 38
  .b f 00 fc 02 92 ac 40 00 e0 12 14 a0 f0 00 00 01 01
  .b f 00 01 00 e0 10 14 a2 f0 00 00 01 01 00 01 00 e0
  .b f 14 12 a4 f0 00 00 01 01 00 01 00 e0 14 12 a4 f2
  .b f 00 00 01 01 00 01 00 70 8a 88 52 f8 00 e0 14 1a
  .b f a4 f0 00 00 01 01 00 01 00 1c 22 22 3e 2a 2a 24
  .b f 00 1c a2 62 22 22 00 00 00 00 00 00 00 e0 52 54
  .b f 50 60 00 00 01 01 01 01 00 e0 50 54 52 60 00 00
  .b f 01 01 01 01 00 e0 54 52 54 60 00 00 01 01 01 01
  .b f 00 70 aa a8 aa b0 00 02 f4 00 00 00 01 00 f4 02
  .b f 00 01 00 00 04 f2 04 00 00 01 00 00 02 f8 02 00
  .b f e0 10 12 14 fa 00 00 01 01 01 00 00 f0 24 12 14
  .b f e2 00 01 00 00 00 01 00 e0 12 14 10 e0 00 00 01
  .b f 01 01 00 00 e0 10 14 12 e0 00 00 01 01 01 00 00
  .b f e0 14 12 14 e0 00 00 01 01 01 00 00 e0 14 12 14
  .b f e2 00 00 01 01 01 00 00 70 8a 88 8a 70 00 08 2a
  .b f 08 00 1c 32 2a 26 1c 00 f0 02 04 00 f0 00 00 01
  .b f 01 01 00 00 f0 00 04 02 f0 00 00 01 01 01 00 00
  .b f f0 04 02 04 f0 00 00 01 01 01 00 00 78 82 80 82
  .b f 78 00 30 c0 04 c2 30 00 04 04 03 00 00 00 fe 50
  .b f 88 88 70 00 01 00 00 00 00 00 18 62 80 62 18 00
  .b 5 02 02 01 00 00 00
$PD_0:
  .b 3 54 7d ff 00
$PD_1:
  .b f ea 00 00 35 33 4d 32 47 32 48 32 44 32 45 32 41
  .b f 32 39 32 3e 32 00 ff 00 5e 41 97 45 96 45 64 3b
  .b f 32 00 31 40 33 47 32 00 31 44 33 40 32 3b 32 40
  .b f 64 41 32 3e 32 00 63 48 33 45 32 48 32 48 32 40
  .b f 32 48 32 00 31 44 33 00 31 40 33 41 32 45 32 4c
  .b f 32 4a 32 00 31 45 33 41 32 3c 32 42 32 46 32 4d
  .b f 32 4b 32 00 31 46 33 42 32 3d 32 39 32 00 63 3c
  .b f 33 45 32 45 32 3c 32 45 32 39 32 00 31 3e 33 3a
  .b f 32 39 32 3a 32 3c 32 3e 32 41 96 45 96 45 64 3b
  .b f 32 00 31 40 33 47 32 00 31 44 33 40 32 3b 32 40
  .b f 64 41 32 3e 32 00 63 48 33 45 32 48 32 48 32 40
  .b f 32 48 32 00 31 44 33 00 31 40 33 41 32 45 32 4c
  .b f 32 4a 32 00 31 45 33 41 32 3c 32 42 32 46 32 4d
  .b f 32 4b 32 00 31 46 33 42 32 3d 32 39 32 00 63 3c
  .b f 33 45 32 45 32 3c 32 45 32 39 32 ff 00 39 33 51
  .b f 32 4c 32 4d 32 47 32 48 32 45 32 3c 32 41 32 00
  .b f ff 00 5e 45 97 48 96 4a 64 44 96 4c 96 4a 64 45
  .b f c8 00 31 40 33 41 32 4a 32 4c 32 4c 32 4a 32 4c
  .b f 32 00 31 4a 33 00 31 44 33 45 32 48 32 4f 32 4d
  .b f 32 00 31 48 33 43 32 45 32 46 32 49 32 50 32 4e
  .b f 32 00 31 49 33 46 32 42 32 41 32 00 63 45 33 48
  .b f 32 48 32 45 32 48 32 41 32 3c 32 3b 32 40 32 41
  .b f 32 43 32 45 32 46 32 45 96 48 96 4a 64 44 96 4c
  .b f 96 4a 64 45 c8 00 31 40 33 41 32 4a 32 4c 32 4c
  .b f 32 4a 32 4c 32 00 31 4a 33 00 31 44 33 45 32 48
  .b f 32 4f 32 4d 32 00 31 48 33 43 32 45 32 46 32 49
  .b f 32 50 32 4e 32 00 31 49 33 46 32 42 32 41 32 00
  .b e 63 45 33 48 32 48 32 45 32 48 32 41 32 ff 00
$PD_2:
  .b f 50 72 65 73 73 20 41 20 74 6f 20 70 6c 61 79 20
  .b f 74 6f 6e 65 73 0a 50 72 65 73 73 20 42 20 74 6f
  .b c 20 74 6f 67 67 6c 65 20 6d 75 73 69 63
$PD_3:
  .b f 4d 75 73 69 63 20 70 6c 61 79 69 6e 67 3a 20 25
  .b 1 75 30
$PD_4:
  .b f 54 6f 6e 65 73 20 70 6c 61 79 69 6e 67 3a 20 25
  .b 1 75 30

$globinit:
  .file <internal>
  .line 1
  p0
  setg  want_music 0
  p0
  p1
  p0
  sys   set_text_font
  ret

main:
  .file main.abc
  .line 5
;     if($just_pressed(A_BUTTON))
  p8
  sys   just_pressed
  bz    $L_main_0
  .line 6
;         $tones_play_auto(tones{ C6 500 });
  push3 3430
  sys   tones_play_auto
$L_main_0:
  .line 7
;     if($just_pressed(B_BUTTON))
  p4
  sys   just_pressed
  bz    $L_main_1
  .line 8
;         want_music = !want_music;
  getg  want_music 0
  not
  setg  want_music 0
$L_main_1:
  .line 10
;     if(want_music && !$music_playing())
  getg  want_music 0
  bz    $L_main_3
  sys   music_playing
  bnz   $L_main_3
  .line 11
;         $music_play(music{ "song.mid" });
  push3 3434
  sys   music_play
$L_main_3:
  .line 12
;     if(!want_music)
  getg  want_music 0
  bnz   $L_main_4
  .line 13
;         $music_stop();
  sys   music_stop
$L_main_4:
  .line 15
;     $set_text_font(FONT_PIXELOIDSANS);
  p0
  p1
  p0
  sys   set_text_font
  .line 17
;     $draw_text_P(0, 10, "Press A to play tones\nPress B to toggle music");
  push4 754978601
  p00
  push  10
  p000
  sys   draw_text_P
  .line 19
;     $draw_textf(0, 50, "Music playing: %u", $music_playing());
  sys   music_playing
  p000
  push4 301993814
  p00
  push  50
  p000
  sys   draw_textf
  .line 20
;     $draw_textf(0, 60, "Tones playing: %u", $tones_playing());
  sys   tones_playing
  p000
  push4 301993832
  p00
  push  60
  p000
  sys   draw_textf
  .line 22
;     $display();
  sys   display
  .line 3
; void main()
  ret

