.shades 2
.saved 0
.global copy 512

data:
  .b f 01 02 03 00 00 00 00 00 00 00 00 00 00 00 00 00
  .b f 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
  .b f 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
  .b f 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
  .b f 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
  .b f 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
  .b f 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
  .b f 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
  .b f 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
  .b f 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
  .b f 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
  .b f 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
  .b f 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
  .b f 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
  .b f 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
  .b f 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
  .b f 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
  .b f 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
  .b f 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
  .b f 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
  .b f 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
  .b f 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
  .b f 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
  .b f 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
  .b f 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
  .b f 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
  .b f 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
  .b f 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
  .b f 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
  .b f 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
  .b f 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
  .b f 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00

$globinit:
  .file <internal>
  .line 1
  ret

main:
  .file memcpy.abc
  .line 16
;     $debug_break();
  sys   debug_break
  .line 20
;         f.a = 42;
  push  42
  .line 19
;         foo_t f;
  pz16
  pz16
  .line 21
;         f.c = 42;
  push2 298
  .line 22
;         $assert(f.a == 42);
  sys   assert
  .line 23
;         $assert(f.c == 42);
  dup
  push  42
  sub
  not
  sys   assert
  .line 24
;         for(u8 i = 0; i < len(f.b); ++i)
  p0
$L_main_1:
  .line 25
;             $assert(f.b[i] == 0);
  refl  34
  dup3
  aixb1 32
  getr
  not
  sys   assert
  .line 24
;         for(u8 i = 0; i < len(f.b); ++i)
  inc
  dup
  p32
  cult
  bz    $L_main_0
  .line 25
;             $assert(f.b[i] == 0);
  refl  34
  dup3
  aixb1 32
  getr
  not
  sys   assert
  .line 24
;         for(u8 i = 0; i < len(f.b); ++i)
  inc
  dup
  p32
  cult
  bz    $L_main_0
  .line 25
;             $assert(f.b[i] == 0);
  refl  34
  dup3
  aixb1 32
  getr
  not
  sys   assert
  .line 24
;         for(u8 i = 0; i < len(f.b); ++i)
  inc
  dup
  p32
  cult
  bz    $L_main_0
  .line 25
;             $assert(f.b[i] == 0);
  refl  34
  dup3
  aixb1 32
  getr
  not
  sys   assert
  .line 24
;         for(u8 i = 0; i < len(f.b); ++i)
  inc
  dup
  p32
  cult
  bz    $L_main_0
  .line 25
;             $assert(f.b[i] == 0);
  refl  34
  dup3
  aixb1 32
  getr
  not
  sys   assert
  .line 24
;         for(u8 i = 0; i < len(f.b); ++i)
  inc
  dup
  p32
  cult
  bz    $L_main_0
  .line 25
;             $assert(f.b[i] == 0);
  refl  34
  dup3
  aixb1 32
  getr
  not
  sys   assert
  .line 24
;         for(u8 i = 0; i < len(f.b); ++i)
  inc
  dup
  p32
  cult
  bz    $L_main_0
  .line 25
;             $assert(f.b[i] == 0);
  refl  34
  dup3
  aixb1 32
  getr
  not
  sys   assert
  .line 24
;         for(u8 i = 0; i < len(f.b); ++i)
  inc
  dup
  p32
  cult
  bz    $L_main_0
  .line 25
;             $assert(f.b[i] == 0);
  refl  34
  dup3
  aixb1 32
  getr
  not
  sys   assert
  .line 24
;         for(u8 i = 0; i < len(f.b); ++i)
  inc
  dup
  p32
  cult
  bnz   $L_main_1
$L_main_0:
  pop
  .line 27
;         $memset(f.b, 3);
  p3
  refl  34
  p32
  p0
  sys   memset
  .line 28
;         $assert(f.a == 42);
  getl  34
  push  42
  sub
  not
  sys   assert
  .line 29
;         $assert(f.c == 42);
  dup
  push  42
  sub
  not
  sys   assert
  .line 30
;         for(u8 i = 0; i < len(f.b); ++i)
  p0
$L_main_4:
  .line 31
;             $assert(f.b[i] == 3);
  refl  34
  dup3
  aixb1 32
  getr
  p3
  sub
  not
  sys   assert
  .line 30
;         for(u8 i = 0; i < len(f.b); ++i)
  inc
  dup
  p32
  cult
  bz    $L_main_3
  .line 31
;             $assert(f.b[i] == 3);
  refl  34
  dup3
  aixb1 32
  getr
  p3
  sub
  not
  sys   assert
  .line 30
;         for(u8 i = 0; i < len(f.b); ++i)
  inc
  dup
  p32
  cult
  bz    $L_main_3
  .line 31
;             $assert(f.b[i] == 3);
  refl  34
  dup3
  aixb1 32
  getr
  p3
  sub
  not
  sys   assert
  .line 30
;         for(u8 i = 0; i < len(f.b); ++i)
  inc
  dup
  p32
  cult
  bz    $L_main_3
  .line 31
;             $assert(f.b[i] == 3);
  refl  34
  dup3
  aixb1 32
  getr
  p3
  sub
  not
  sys   assert
  .line 30
;         for(u8 i = 0; i < len(f.b); ++i)
  inc
  dup
  p32
  cult
  bz    $L_main_3
  .line 31
;             $assert(f.b[i] == 3);
  refl  34
  dup3
  aixb1 32
  getr
  p3
  sub
  not
  sys   assert
  .line 30
;         for(u8 i = 0; i < len(f.b); ++i)
  inc
  dup
  p32
  cult
  bz    $L_main_3
  .line 31
;             $assert(f.b[i] == 3);
  refl  34
  dup3
  aixb1 32
  getr
  p3
  sub
  not
  sys   assert
  .line 30
;         for(u8 i = 0; i < len(f.b); ++i)
  inc
  dup
  p32
  cult
  bz    $L_main_3
  .line 31
;             $assert(f.b[i] == 3);
  refl  34
  dup3
  aixb1 32
  getr
  p3
  sub
  not
  sys   assert
  .line 30
;         for(u8 i = 0; i < len(f.b); ++i)
  inc
  dup
  p32
  cult
  bz    $L_main_3
  .line 31
;             $assert(f.b[i] == 3);
  refl  34
  dup3
  aixb1 32
  getr
  p3
  sub
  not
  sys   assert
  .line 30
;         for(u8 i = 0; i < len(f.b); ++i)
  inc
  dup
  p32
  cult
  bnz   $L_main_4
$L_main_3:
  pop
  .line 33
;         $memset(f.b[3:20], 5);
  p5
  refl  31
  push2 17
  sys   memset
  .line 34
;         $assert(f.a == 42);
  getl  34
  push  42
  sub
  not
  sys   assert
  .line 35
;         $assert(f.c == 42);
  dup
  push  42
  sub
  not
  sys   assert
  .line 37
;             $assert(f.b[i] == 3);
  getl  33
  p3
  sub
  not
  sys   assert
  getl  32
  p3
  sub
  not
  sys   assert
  getl  31
  p3
  sub
  not
  sys   assert
  .line 39
;             $assert(f.b[i] == 5);
  getl  30
  p5
  sub
  not
  sys   assert
  getl  29
  p5
  sub
  not
  sys   assert
  getl  28
  p5
  sub
  not
  sys   assert
  getl  27
  p5
  sub
  not
  sys   assert
  getl  26
  p5
  sub
  not
  sys   assert
  getl  25
  p5
  sub
  not
  sys   assert
  getl  24
  p5
  sub
  not
  sys   assert
  getl  23
  p5
  sub
  not
  sys   assert
  getl  22
  p5
  sub
  not
  sys   assert
  getl  21
  p5
  sub
  not
  sys   assert
  getl  20
  p5
  sub
  not
  sys   assert
  getl  19
  p5
  sub
  not
  sys   assert
  getl  18
  p5
  sub
  not
  sys   assert
  getl  17
  p5
  sub
  not
  sys   assert
  getl  16
  p5
  sub
  not
  sys   assert
  getl  15
  p5
  sub
  not
  sys   assert
  getl  14
  p5
  sub
  not
  sys   assert
  .line 41
;             $assert(f.b[i] == 3);
  getl  13
  p3
  sub
  not
  sys   assert
  getl  12
  p3
  sub
  not
  sys   assert
  getl  11
  p3
  sub
  not
  sys   assert
  getl  10
  p3
  sub
  not
  sys   assert
  getl  9
  p3
  sub
  not
  sys   assert
  dup8
  p3
  sub
  not
  sys   assert
  dup7
  p3
  sub
  not
  sys   assert
  dup6
  p3
  sub
  not
  sys   assert
  dup5
  p3
  sub
  not
  sys   assert
  dup4
  p3
  sub
  not
  sys   assert
  dup3
  p3
  sub
  not
  sys   assert
  dup2
  p3
  sub
  not
  sys   assert
  .line 43
;         $memset(f.b[3], 7);
  p7
  refl  31
  p1
  p0
  sys   memset
  .line 44
;         $assert(f.a == 42);
  getl  34
  push  42
  sub
  not
  sys   assert
  .line 45
;         $assert(f.c == 42);
  dup
  push  42
  sub
  not
  sys   assert
  .line 47
;             $assert(f.b[i] == 3);
  getl  33
  p3
  sub
  not
  sys   assert
  getl  32
  p3
  sub
  not
  sys   assert
  getl  31
  p3
  sub
  not
  sys   assert
  .line 48
;         $assert(f.b[3] == 7);
  getl  30
  p7
  sub
  not
  sys   assert
  .line 50
;             $assert(f.b[i] == 5);
  getl  29
  p5
  sub
  not
  sys   assert
  getl  28
  p5
  sub
  not
  sys   assert
  getl  27
  p5
  sub
  not
  sys   assert
  getl  26
  p5
  sub
  not
  sys   assert
  getl  25
  p5
  sub
  not
  sys   assert
  getl  24
  p5
  sub
  not
  sys   assert
  getl  23
  p5
  sub
  not
  sys   assert
  getl  22
  p5
  sub
  not
  sys   assert
  getl  21
  p5
  sub
  not
  sys   assert
  getl  20
  p5
  sub
  not
  sys   assert
  getl  19
  p5
  sub
  not
  sys   assert
  getl  18
  p5
  sub
  not
  sys   assert
  getl  17
  p5
  sub
  not
  sys   assert
  getl  16
  p5
  sub
  not
  sys   assert
  getl  15
  p5
  sub
  not
  sys   assert
  getl  14
  p5
  sub
  not
  sys   assert
  .line 52
;             $assert(f.b[i] == 3);
  getl  13
  p3
  sub
  not
  sys   assert
  getl  12
  p3
  sub
  not
  sys   assert
  getl  11
  p3
  sub
  not
  sys   assert
  getl  10
  p3
  sub
  not
  sys   assert
  getl  9
  p3
  sub
  not
  sys   assert
  dup8
  p3
  sub
  not
  sys   assert
  dup7
  p3
  sub
  not
  sys   assert
  dup6
  p3
  sub
  not
  sys   assert
  dup5
  p3
  sub
  not
  sys   assert
  dup4
  p3
  sub
  not
  sys   assert
  dup3
  p3
  sub
  not
  sys   assert
  dup2
  p3
  sub
  not
  sys   assert
  popn  34
  .line 55
;     $assert(copy[0] == 0);
  getg  copy 0
  not
  sys   assert
  .line 56
;     $assert(copy[1] == 0);
  getg  copy 1
  not
  sys   assert
  .line 57
;     $assert(copy[2] == 0);
  getg  copy 2
  not
  sys   assert
  .line 58
;     $assert(copy[3] == 0);
  getg  copy 3
  not
  sys   assert
  .line 60
;     $memcpy(copy, data);
  p0
  p1
  p00
  p2
  p0
  pushg copy 0
  p0
  p2
  sys   memcpy_P
  .line 62
;     $assert(copy[0] == 1);
  getg  copy 0
  dec
  not
  sys   assert
  .line 63
;     $assert(copy[1] == 2);
  getg  copy 1
  p2
  sub
  not
  sys   assert
  .line 64
;     $assert(copy[2] == 3);
  getg  copy 2
  p3
  sub
  not
  sys   assert
  .line 65
;     $assert(copy[3] == 0);
  getg  copy 3
  not
  sys   assert
  .line 67
;     int x = 42;
  push4 32768042
  .line 70
;     $assert(y == 500);
  dup
  sys   assert
  .line 71
;     $memcpy(y, x);
  refl  4
  p2
  p0
  refl  6
  p2
  p0
  sys   memcpy
  .line 72
;     $assert(y == 42);
  dupw
  push  42
  sub2b
  bool2
  not
  sys   assert
  .line 74
;     blah a = { 600, 700 };
  push4 45875800
  .line 75
;     blah b = { 800, 900 };
  p32
  push4 17007619
  .line 77
;     $assert(a.a == 600);
  sys   assert
  .line 78
;     $assert(a.b == 700);
  dupw5
  push2 700
  sub2
  bool2
  not
  sys   assert
  .line 79
;     $memcpy(a, b);
  refl  4
  p4
  p0
  refl  12
  p4
  p0
  sys   memcpy
  .line 80
;     $assert(a.a == 800);
  dupw7
  p32
  p3
  sub2
  bool2
  not
  sys   assert
  .line 81
;     $assert(a.b == 900);
  dupw5
  push2 900
  sub2
  bool2
  not
  sys   assert
  .line 83
;     u32 z = 0x87654321;
  push4 2271560481
  .line 84
;     byte[]& zb = z;
  refl  4
  p4
  p0
  .line 85
;     $assert(zb[3] == 0x87);
  getl4 4
  p3
  p0
  uaidx 1
  getr
  push  135
  sub
  not
  sys   assert
  .line 86
;     $assert(zb[2] == 0x65);
  getl4 4
  p2
  p0
  uaidx 1
  getr
  push  101
  sub
  not
  sys   assert
  .line 87
;     $assert(zb[1] == 0x43);
  getl4 4
  p1
  p0
  uaidx 1
  getr
  push  67
  sub
  not
  sys   assert
  .line 88
;     $assert(zb[0] == 0x21);
  getl4 4
  p00
  uaidx 1
  getr
  push  33
  sub
  not
  sys   assert
  .line 90
;     $debug_break();
  sys   debug_break
  .line 14
; void main()
  popn  20
  ret

